import{f as w,g as k,c as l,a,F as p,r as m,u as v,o as s,t as o,b as g,w as y,h as T,e as C,d as _}from"./CCmcE4Pf.js";import{u as D,q as A}from"./D45PJ-eE.js";import"./DNwEmkJX.js";const B={key:0},E={__name:"index",async setup(N){let i,d;const{data:f}=([i,d]=w(()=>D("blog-list",()=>{const n=A("/blog").only(["_path","title","date","excerpt","tags","categories"]).sort({date:-1});return n.where({draft:{$ne:!0}}),n.find()})),i=await i,d(),i),h=k(()=>f.value?f.value.map(n=>({...n,date:x(n.date),paragraphs:b(n.excerpt)})):[]);function x(n){const t=new Date(n);return new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric"}).format(t)}function b(n){const t=[];function u(e){if(e)if(e.type==="element"&&e.tag==="p"){const r=e.children.filter(c=>c.type==="text").map(c=>c.value).join("");t.push(r)}else Array.isArray(e.children)&&e.children.forEach(r=>u(r))}return u(n),t}return(n,t)=>{const u=C;return s(),l("section",null,[t[4]||(t[4]=a("article",{class:"prose",style:{"margin-bottom":"1rem"}},[a("h1",null,"Blog Posts"),a("p",null,"This are my recent blog posts")],-1)),(s(!0),l(p,null,m(v(h),e=>(s(),l("article",{key:e._path,class:"prose",style:{"margin-bottom":"1rem"}},[a("header",null,[a("div",null,o(e.date),1),a("h2",null,[g(u,{to:e._path},{default:y(()=>[_(o(e.title),1)]),_:2},1032,["to"])])]),"paragraphs"in e?(s(),l("main",B,[(s(!0),l(p,null,m(e.paragraphs,r=>(s(),l("p",{key:r},o(r),1))),128))])):T("",!0),a("footer",null,[t[1]||(t[1]=a("span",null,[a("b",null,"Categories: ")],-1)),(s(!0),l(p,null,m(e.categories,r=>(s(),l("span",{key:r},o(r)+", ",1))),128)),t[2]||(t[2]=a("span",null,[a("b",null,"Tags: ")],-1)),(s(!0),l(p,null,m(e.tags,r=>(s(),l("span",{key:r},o(r)+", ",1))),128)),t[3]||(t[3]=a("br",null,null,-1)),g(u,{to:e._path},{default:y(()=>t[0]||(t[0]=[_("read more")])),_:2},1032,["to"])])]))),128))])}}};export{E as default};
